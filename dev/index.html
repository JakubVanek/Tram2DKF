<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · Tram2DKF</title><meta name="title" content="Home · Tram2DKF"/><meta property="og:title" content="Home · Tram2DKF"/><meta property="twitter:title" content="Home · Tram2DKF"/><meta name="description" content="Documentation for Tram2DKF."/><meta property="og:description" content="Documentation for Tram2DKF."/><meta property="twitter:description" content="Documentation for Tram2DKF."/><meta property="og:url" content="https://JakubVanek.github.io/Tram2DKF/"/><meta property="twitter:url" content="https://JakubVanek.github.io/Tram2DKF/"/><link rel="canonical" href="https://JakubVanek.github.io/Tram2DKF/"/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>Tram2DKF</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a><ul class="internal"><li><a class="tocitem" href="#State-space-models"><span>State space models</span></a></li><li><a class="tocitem" href="#Kalman-filtering"><span>Kalman filtering</span></a></li><li><a class="tocitem" href="#Tram-trajectories"><span>Tram trajectories</span></a></li><li><a class="tocitem" href="#Demo-scripts"><span>Demo scripts</span></a></li></ul></li><li><a class="tocitem" href="reference/">Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JakubVanek/Tram2DKF" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JakubVanek/Tram2DKF/blob/main/docs/src/index.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Tram2DKF"><a class="docs-heading-anchor" href="#Tram2DKF">Tram2DKF</a><a id="Tram2DKF-1"></a><a class="docs-heading-anchor-permalink" href="#Tram2DKF" title="Permalink"></a></h1><p>A set of utilities for testing tram localization algorithms.</p><p>The package can be roughly split in three parts:</p><ul><li>Framework for defining linear and nonlinear state space models</li><li>Implementation of Kalman filters:<ul><li>Linear Kalman filter</li><li>Extended Kalman filter</li><li>Iterated Extended Kalman filter</li></ul></li><li>Generator of tram trajectories based on simple track geometry description</li></ul><h2 id="State-space-models"><a class="docs-heading-anchor" href="#State-space-models">State space models</a><a id="State-space-models-1"></a><a class="docs-heading-anchor-permalink" href="#State-space-models" title="Permalink"></a></h2><p>To estimate the state of something using Kalman filters, you need to have a model of it. This package accepts linear and nonlinear explicit state-space models.</p><p>Nonlinear models are defined by creating a new structure that implements a <a href="reference/#Tram2DKF.StateEquation"><code>StateEquation{Time}</code></a> abstract type. The <code>Time</code> parameter determines the kind of the system: either <a href="reference/#Tram2DKF.DiscreteTime"><code>DiscreteTime</code></a> or <a href="reference/#Tram2DKF.ContinuousTime"><code>ContinuousTime</code></a>.</p><p>You could define a continuous-time model this way:</p><pre><code class="language-julia hljs">using Tram2DKF
import Tram2DKF.ninputs, Tram2DKF.noutputs, Tram2DKF.nstates

# define new struct
struct FancyIntegrator &lt;: StateEquation{ContinuousTime} end

# compute state derivative: just the input
(::FancyIntegrator)(x, u) = [u[1]]

# add marker functions
ninputs(::FancyIntegrator) = 1
nstates(::FancyIntegrator) = 1</code></pre><p>You can then <a href="reference/#Tram2DKF.discretize"><code>discretize</code></a> such a model into a discrete-time model. Alternatively, you may directly define a struct subclassing <a href="reference/#Tram2DKF.StateEquation"><code>StateEquation{DiscreteTime}</code></a>.</p><p>Linear models are represented using <a href="reference/#Tram2DKF.LTIStateEquation"><code>LTIStateEquation</code></a> and <a href="reference/#Tram2DKF.LTIMeasurementEquation"><code>LTIMeasurementEquation</code></a> types. These structs directly accept the state-space matrices as their fields.</p><p>You may also <a href="reference/#Tram2DKF.linearize-Tuple{MeasurementEquation, Any, Any}"><code>linearize</code></a> a nonlinear model in some operating point into a linear model.</p><h2 id="Kalman-filtering"><a class="docs-heading-anchor" href="#Kalman-filtering">Kalman filtering</a><a id="Kalman-filtering-1"></a><a class="docs-heading-anchor-permalink" href="#Kalman-filtering" title="Permalink"></a></h2><p>Kalman filters, in a nutshell, allow you to fuse information from multiple sources. This allows you to reduce the effect of measurement noise on your estimates.</p><p>The package currently implements a <a href="reference/#Tram2DKF.LinearKalmanFilter"><code>LinearKalmanFilter</code></a>, an <a href="reference/#Tram2DKF.ExtendedKalmanFilter"><code>ExtendedKalmanFilter</code></a> and an <a href="reference/#Tram2DKF.IteratedExtendedKalmanFilter"><code>IteratedExtendedKalmanFilter</code></a>.</p><p>The structs themselves carry only the parameters of the respective algorithms. To invoke the filters, you can use:</p><ul><li>the <a href="reference/#Tram2DKF.forward_step-Tuple{ExtendedKalmanFilter, StateEquation{DiscreteTime}, Tram2DKF.UncertainValue, Any, Tram2DKF.UncertainValue}"><code>forward_step</code></a> function for the time update step (= prediction of new state),</li><li>the <a href="reference/#Tram2DKF.data_step-Tuple{ExtendedKalmanFilter, MeasurementEquation, Tram2DKF.UncertainValue, Any, Tram2DKF.UncertainValue}"><code>data_step</code></a> function for the data update step (= fusion of sensor measurements),</li><li>the <a href="reference/#Tram2DKF.backward_step-Tuple{LinearKalmanFilter, LTIStateEquation{DiscreteTime}, Tram2DKF.UncertainValue, Tram2DKF.UncertainValue, Tram2DKF.UncertainValue}"><code>backward_step</code></a> function for a backward smoothing step (= smoothing of old states based on new measurements).</li></ul><p>These filters assume that measurements and states are Gaussian random variables. To represent such variables, the <a href="reference/#Tram2DKF.Gaussian"><code>Gaussian</code></a> and <a href="reference/#Tram2DKF.SqrtGaussian"><code>SqrtGaussian</code></a> types is used. The latter is used to implement more numerically stable updates. Additionally, there is a <a href="reference/#Tram2DKF.UncertainValue"><code>UncertainValue</code></a> abstract type that unifies the two representations behind two methods: <a href="reference/#Tram2DKF.mean-Tuple{Gaussian}"><code>mean</code></a> and <a href="reference/#Tram2DKF.covariance-Tuple{Gaussian}"><code>covariance</code></a>.</p><h2 id="Tram-trajectories"><a class="docs-heading-anchor" href="#Tram-trajectories">Tram trajectories</a><a id="Tram-trajectories-1"></a><a class="docs-heading-anchor-permalink" href="#Tram-trajectories" title="Permalink"></a></h2><p>The ultimate goal of this package is to be useful in developing tram localization algorithms. To compare different algorithms, it is necessary to obtain some dataset on which they could be tested. This is somewhat nontrivial.</p><p>This package allows you to generate synthetic data based on a simple description. The description is composed of two parts:</p><ul><li>Description of the tram track. This basically determines where the track turns straight track segments are, and what are their parameters.</li><li>Description of the tram speed profile. This determines when the tram accelerates or decelerates.</li></ul><p>This is illustrated by a simple example:</p><pre><code class="language-julia hljs">using Tram2DKF
using LinearAlgebra

# Define track profile
track = [
    StraightTrack(distance=100.0),
    TrackTurn(angle=deg2rad(+90), radius=20.0, transition_curve_length=0.0),
    StraightTrack(distance=100.0),
]

# Define speed profile
trip = [
    Stop(duration=1.0),
    Accelerate(to_speed=10.0, acceleration=1.0),
    ConstantSpeed(speed=10.0, distance=100.0),
    Accelerate(to_speed=0.0, acceleration=1.0),
    Stop(duration=10.0),
]

# Generate ground truth data
states = render_trip(track, trip, Ts, 10)
# ^ `states` is a vector of state vectors at different times

# Simulate sensor measurements corrupted by noise
gyro = simulate_gyro(states, 0.02)
acc  = simulate_accelerometer(states, 0.1)
odo  = simulate_odometry(states, 0.01)
gnss = simulate_gnss(states, 200, I(3))</code></pre><h2 id="Demo-scripts"><a class="docs-heading-anchor" href="#Demo-scripts">Demo scripts</a><a id="Demo-scripts-1"></a><a class="docs-heading-anchor-permalink" href="#Demo-scripts" title="Permalink"></a></h2><p>There are three example scripts available:</p><ul><li><code>scripts/plot_curved_track.jl</code> shows how to generate samples of the track position without concern for any tram dynamics.</li><li><code>scripts/plot_speed_profile.jl</code> shows how to generate trajectories of trams when considering changes in speed.</li><li><code>scripts/estimation_test.jl</code> is an all-in-one example:<ul><li>first, the test data is generated</li><li>then, a model is defined (or, rather, a predefined <a href="reference/#Tram2DKF.PolarCTRA"><code>PolarCTRA</code></a> model is reused)</li><li>finally, a Kalman filter is run to try to undo the effect of noise in measurements</li></ul></li></ul></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="reference/">Reference »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.1 on <span class="colophon-date" title="Friday 14 February 2025 02:46">Friday 14 February 2025</span>. Using Julia version 1.11.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
